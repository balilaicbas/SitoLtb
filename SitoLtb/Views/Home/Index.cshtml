@{
    ViewData["Title"] = "Home Page";
    var googleMapsApiKey = ViewData["ApiKey"];
}
@model SitoLtb.ViewModels.IndexVM

<section class="section-1">
    <img src="~/images/HeroImage.jpg" alt="Chessboard" />
    <div class="hero-copy">
        <h1>Il Libero Torneificio del Borgo</h1>
        <h2>Tutti i mercoledì nella sede in via Bena 10/a e tutti i giovedì presso l'associazione "Comala" puoi partecipare agli eventi del circolo</h2>
        <button asp-controller="Home" asp-action="Preiscrizione">Scopri gli eventi</button>
    </div>
</section>

<section class="section-2">
    <div class="slider-wrapper">
        <div class="slider" id="slider">
            @foreach (var post in Model.Posts.OrderByDescending(p => p.CreatedDate).Take(10))
            {
                <div class="card">
                    <ul>
                        <li>@post.Title</li>
                        <li>@post.ThumbnailUrl</li>
                        <li>@post.Description</li>
                        <li>@post.CreatedDate</li>
                    </ul>
                </div>
            }
        </div>
    </div>
</section>

<section class="section-3">
    <h2>Chi siamo</h2>
    <div class="container-div">
        <div class="container1" id="map" aria-label="Mappa"></div>
        <div class="container2">mercoledì, è arrivato il momento</div>
    </div>
</section>

<section class="section-4">
    <h2>La nostra Galleria</h2>
    <div class="section4-gallery-grid">
        <img class="section4-img-1" src="https://picsum.photos/id/1015/1200/800" alt="Galleria 1" />
        <img class="section4-img-2" src="https://picsum.photos/id/1015/1200/800" alt="Galleria 2" />
        <img class="section4-img-3" src="https://picsum.photos/id/1015/1200/800" alt="Galleria 3" />
        <img class="section4-img-4" src="https://picsum.photos/id/1015/1200/800" alt="Galleria 4" />
        <img class="section4-img-5" src="https://picsum.photos/id/1015/1200/800" alt="Galleria 5" />
        <img class="section4-img-6" src="https://picsum.photos/id/1015/1200/800" alt="Galleria 6" />
    </div>
</section>

<section class="section-5">
    <ul>
        <li>
            <img src="https://picsum.photos/id/1016/1200/800" alt="La Verdolina" />
            <span><a asp-controller="Home" asp-action="PreiscrizioneVerdolina">La Verdolina</a></span>
        </li>
        <li>
            <img src="https://picsum.photos/id/1016/1200/800" alt="Comala" />
            <span><a asp-controller="Home" asp-action="PreiscrizioneComala">Comala</a></span>
        </li>
        <li>
            <img src="https://picsum.photos/id/1016/1200/800" alt="Tornei del weekend" />
            <span><a asp-controller="Home" asp-action="PreiscrizioneWeekend">Tornei più seri</a></span>
        </li>
    </ul>
</section>

<section class="section-6">
    <div class="image-comparison-slider">
    <img src="~/images/split-test1.jpg" alt="before"/>
    <div class="img-wrapper">
            <img src="~/images/split-test2.jpg" alt="after" />
    </div>
    <span class="label label-before">Before</span>
        <span class="label label-after">After</span>
    <div class="handle">
        <div class="handle-line"></div>
            <div class="handle-circle">
                <i class="fas fa-chevron-left"></i>
                <i class="fas fa-chevron-right"></i>
            </div>
    </div>
    </div>
</section>

@section Scripts {
    <script>
        function initMap() {
          const location = { lat:45.073662, lng: 7.622538 };
          const map = new google.maps.Map(document.getElementById('map'), { zoom: 15, center: location });
          new google.maps.Marker({ position: location, map });
        }
    </script>

    <script>
        const sliderS2 = document.getElementById('slider');
        const totalCards = 10;
        let index = 0;
        setInterval(() => {
          index++;
          sliderS2.style.transition = "transform 0.5s ease-in-out";
          sliderS2.style.transform = `translateX(-${(100 / 3) * index}%)`;
          if (index === totalCards) {
            setTimeout(() => {
              sliderS2.style.transition = "none";
              sliderS2.style.transform = `translateX(0)`;
              index = 0;
            }, 500);
          }
        }, 3000);
    </script>
    <script>
    const slider = document.querySelector(".image-comparison-slider");
    const sliderImgWrapper = document.querySelector(".image-comparison-slider .img.wrapper");
    const sliderHandle = document.querySelector(".image-comparison-slider .handle");

        VanillaTilt.init(document.querySelector(".image-comparison-slider"), {
            max: 25,
            speed: 400
        });


    slider.addEventListener("mousemove", sliderMouseMove);
    slider.addEventListener("touchmove",sliderMouseMove);

    function sliderMouseMove(event){

        if (isSliderLocked) return;
        const sliderLeftx=slider.offsetLeft;
        const sliderWidth=slider.clientWidth;
        let mouseX = (event.clientX || event.touches)- sliderLeftx;

        if (mouseX < 0 ) mouseX=0;
                else if(mouseX > sliderWidth) mouseX= sliderWidth;

       sliderImgWrapper.style.width='${((1- mouseX/sliderWidth)*100).toFixed(4)}%';
       sliderHandle.style.left='calc(${((mouseX/sliderWidth)*100).toFixed(4)}% - $(sliderHandleWidth/2)px)';
       

    }
    let isSliderLocked=false;

    slider.addEventListener("mouseDown", sliderMouseDown);
    slider.addEventListener("touchstart", sliderMouseDown);
    slider.addEventListener("mouseup", sliderMouseUp);
    slider.addEventListener("touchend", sliderMouseUp);
    slider.addEventListener("mouseleave", sliderMouseLeave);

    function sliderMouseUp() {
        if (!isSliderLocked) isSliderLocked = true;
    }
    //se tolgo questo diventa click muovi e basta
     function   sliderMouseLeave() {
     
         if (!isSliderLocked) isSliderLocked=false;
     }
     function sliderMouseDown(eventi) {
             if (!isSliderLocked) isSliderLocked=false;
             sliderMouseMove(event); 

     }





    </script>



    <script async defer src="https://maps.googleapis.com/maps/api/js?key=@googleMapsApiKey&callback=initMap"></script>
}
