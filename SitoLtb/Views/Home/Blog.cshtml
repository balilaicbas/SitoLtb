@model SitoLtb.ViewModels.BlogVM
@using X.PagedList
@using X.PagedList.Mvc.Core
@using X.PagedList.Web.Common

<section class="blog-container" aria-label="Articoli del blog">
    @if (Model?.Posts != null && Model.Posts.Any())
    {
        var items = Model.Posts.Take(5).ToList();
        var first = items.First();

        <div class="blog-grid__cards">
            <article class="blog-card blog-card--featured">
                <a asp-controller="Blog" asp-action="Post" asp-route-slug="@first.Url" class="blog-link">
                    <div class="blog-image" style="background-image:url('@first.Image');">
                        <div class="blog-overlay">
                            <p class="blog-kicker">In evidenza</p>
                            <h2 class="blog-title">@first.Title</h2>
                            <p class="blog-description">@first.Description</p>
                            <span class="blog-category">@first.Categoria</span>
                        </div>
                    </div>
                </a>
            </article>

            @foreach (var post in items.Skip(1))
            {
                <article class="blog-card blog-card--regular">
                    <a asp-controller="Blog" asp-action="Post" asp-route-slug="@post.Url" class="blog-link">
                        <div class="blog-image" style="background-image:url('@post.Image');">
                            <div class="blog-overlay">
                                <h3 class="blog-title">@post.Title</h3>
                                <p class="blog-description">@post.Description</p>
                                <span class="blog-category">@post.Categoria</span>
                            </div>
                        </div>
                    </a>
                </article>
            }
        </div>
    }

    <div class="pagination-container">
        Page @(Model?.Posts.PageCount < Model?.Posts.PageNumber ? 0 : Model?.Posts.PageNumber) of @Model?.Posts.PageCount
        @Html.PagedListPager(
                 Model?.Posts,
                 page => Url.Action("Index", new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }),
                 new PagedListRenderOptions
        {
            ContainerDivClasses = new List<string> { "pagination-wrapper" },
            UlElementClasses = new List<string> { "pagination" },
            LiElementClasses = new List<string> { "page-item" },
            ActiveLiElementClass = "active"
        }
                 )
    </div>
</section>
